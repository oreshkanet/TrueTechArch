# Протокол взаимодействия сервисов

* Status: accepted
* Deciders: Денис Сайгин

## Context and Problem Statement

Реализация процессинга предполагается выполнять в микросервисной архитектуре, что предполагает большое количество сервисов и интенсивную коммуникацию между ними.

## Decision Drivers

* JSON через HTTP - это широко используемый подход к созданию API, который поддерживается многими языками программирования и фреймворками. Этот подход прост, легковесен и понятен, что делает его хорошим выбором для многих проектов. Однако он может быть менее эффективным, чем другие варианты, особенно когда речь идет об обработке больших объемов данных.
* С другой стороны, gRPC - это более новая технология, которая предлагает более эффективный способ создания API. Он использует двоичную сериализацию для передачи данных, что может быть быстрее и компактнее, чем при использовании JSON. gRPC также поддерживает двунаправленную потоковую передачу, что делает его хорошим выбором для приложений реального времени.

## Considered Options

* использование JSON через HTTP
* использование JSON через HTTP + gRPC

## Decision Outcome

Chosen option: "использование JSON через HTTP + gRPC", because Для взаимодействия с внешними сервисами мы обязаны использовать HTTP-протокол с передачей данных в JSON-формате.
Для синхронного взаимодействия внутренних (в рамках систем процессинга) сервисов мы решили использовать gRPC. Мы считаем, что gRPC обеспечит более эффективное и маштабируемое решения для нашей системы. И ожидаем, что это позволит обрабатывать болшие объемы данных, а двоичная сериализация gRPC будет более эффективной.

### Positive Consequences

* Использование HTTP + JSON для публичного API не заставит клиентов использовать gRPC-совместимые библиотеки. Это большой плюс, поскольку не все клиенты могут это реализовать (в силу ограничения используемых технологий).
* Использование протокола gRPC для внутренних коммуникаций сервисов позволит использовать все преимущества этого протокола: высокая скорость сериализации Protobuf и высокая степень сжатия данных; возможность использования HTTP/2

### Negative Consequences

* Может потребовать дополнительного времени и усилий для изучения и внедрения этих технологий
